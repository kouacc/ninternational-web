---
import Layout from "./Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

import i18next, { t } from "i18next";

interface Props {
    frontmatter: {
        projectSystem: string;
        projectLanguage: string;
        projectName: string;
        projectImg: string;
        projectAuthor: string;
        projectDate: string;
        projectControllers: string[],
        description: string,
    }

}

const { frontmatter } = Astro.props;
---

<Layout title={`${frontmatter.projectName} | ${frontmatter.projectLanguage} - Ninternational`} description={frontmatter.description} img={`${frontmatter.projectImg}`} lang={i18next.language}>
    <Header></Header>
    <main>
        <div class="back-button">
            <a href="../../../projects">
                <i class="fa-solid fa-arrow-left"></i>
                {t("project_page.back")}</a>
        </div>
        <div class="project-title">
            <h1>{frontmatter.projectName}</h1>
            <div class="project-title__img">
                <img src={`/icons/platforms/${frontmatter.projectSystem}.svg`} alt={`${frontmatter.projectSystem}`}>
                <img src={`/icons/flags/${frontmatter.projectLanguage}.svg`} alt={`${frontmatter.projectLanguage}`}>
            </div>
        </div>
        <img src={`${frontmatter.projectImg}`} alt={`${frontmatter.projectName}`}>
        <div class="project-author">
            <div>
                <section>
                    <h4>{t("project_page.translated")}</h4>
                    <p>{frontmatter.projectAuthor}</p>
                </section>
                <section>
                    <h4>{t("project_page.date")}</h4>
                    <p>{frontmatter.projectDate.slice(0,10)}</p>
                </section>
            </div>
            {frontmatter.projectControllers && <div class="project-controller">
                <h4>{t("project_page.controllers")}</h4>
                <ul>
                    {frontmatter.projectControllers.map((controller) => (
                        <li><img src={`/icons/controllers/${controller}.svg`} alt={`${controller}`}/></li>
                    ))}
            </div>}
        </div>
        <slot />
    </main>
    <Footer></Footer>
</Layout>

<style>
    main {
		margin: auto;
		padding: 1rem;
		width: 1000px;
		max-width: calc(100% - 2rem);
		color: #000;
		font-size: 20px;
		line-height: 1.6;
        margin-top: 4rem;
	}

    img {
        width: 100%;
        height: auto;
    }

    .back-button {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        text-decoration: none;
    }

    .back-button a {
        text-decoration: none;
        color: #000;
    }

    .project-title {
        display: flex;
        flex-direction: row;
        gap: 2rem;
    }

    .project-title__img img {
        width: auto;
        height: 2.6rem;
    }

    .project-title__img {
        display: flex;
        gap: 1rem;
    }

    .project-author {
        display: flex;
        justify-content: space-between;
    }

    .project-author > div:first-child {
        display: flex;
        gap: 5rem;
    }

    .project-controller {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        width: 50%;
    }

    .project-controller ul {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        width: 100%;
        gap: 0.8rem;
        list-style: none;
        margin: 0;
        padding: 0;
    }

    .project-controller img {
        width: auto;
        height: 2.5rem;
    }

    @media (max-width: 630px) {
        .project-title {
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .project-title h1 {
            margin-bottom: 0;
        }

        .project-title__img {
            align-items: center;
        }

        .project-title__img img:first-child {
            width: auto;
            height: 1.8rem;
        }

        .project-author {
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: repeat(2, 1fr);
            grid-column-gap: 0px;
            grid-row-gap: 0px;
        }

        .project-controller {
            width: 100%;
            grid-area: 2 / 1 / 3 / 3;
        }

        .project-controller ul {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            width: 100%;
        }

        .project-controller img {
            width: auto;
            height: 2rem;
        }
    }

    @media (min-width: 631px) {
        .project-title {
            align-items: center;
        }

        
    }
</style>